<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>The Storm at Marrow House — Interactive</title>
<style>
  :root{
    --bg:#090707;
    --panel:#0f0d0e;
    --muted:#bdb5b8;
    --accent:#9b6b6b;
    --glass: rgba(255,255,255,0.04);
    --max-width:1100px;
    --transition:400ms ease;
    font-family: "Georgia", "Times New Roman", serif;
    color-scheme: dark;
  }

  html,body{height:100%;margin:0;background:linear-gradient(180deg,#050405 0%, #0b0b0b 100%);color:var(--muted);}
  .stage{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; padding:24px;}
  .card{width:100%; max-width:var(--max-width); height:88vh; overflow:hidden; border-radius:14px; box-shadow:0 20px 60px rgba(0,0,0,0.7); background:linear-gradient(180deg, rgba(10,10,10,0.5), rgba(6,6,6,0.7)); display:grid; grid-template-columns: 1fr 420px; gap:20px; position:relative;}
  
  .visual{
    position: relative;
    width: 100%;
    height: 100%;
    border-radius: 14px 0 0 14px;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #020202;
  }

  .bg-img {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 100%;
    transform: translate(-50%, -50%) scale(1.03);
    background-size: contain;
    background-position: center center;
    background-repeat: no-repeat;
    transition: opacity var(--transition), transform 900ms ease;
    opacity: 0;
    z-index: 1;
  }
  .bg-img.show {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    z-index: 2;
  }

  .visual::after {
    content:"";
    position:absolute; inset:0;
    background: linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.6) 40%, rgba(0,0,0,0.85) 100%);
    pointer-events:none;
    z-index:3;
  }

  .panel{padding:28px; background:linear-gradient(180deg, rgba(10,6,6,0.35), rgba(8,6,6,0.6)); border-left:1px solid rgba(255,255,255,0.03); display:flex; flex-direction:column; gap:18px;}
  .title{font-family: "Playfair Display", Georgia, serif; font-size:22px; letter-spacing:0.4px; color:#f4eef0; margin:0;}
  .subtitle{ font-size:12px; color:var(--muted); margin-top:6px; }
  .controls{display:flex; flex-direction:column; gap:10px;}
  .btn{background:transparent; border:1px solid rgba(255,255,255,0.06); padding:10px 14px; border-radius:10px; color:var(--muted); cursor:pointer; font-family:inherit; transition: all 160ms ease; backdrop-filter: blur(4px);}
  .btn:hover{ transform:translateY(-3px); box-shadow:0 6px 20px rgba(0,0,0,0.6); }
  .btn.primary{ border-color: rgba(155,107,107,0.9); color:#ffeeef; background: linear-gradient(180deg, rgba(155,107,107,0.08), rgba(0,0,0,0.03)); }
  .nav{ display:flex; gap:8px; align-items:center;}
  #sceneText{ display:none; font-size:14px; line-height:1.5; color:var(--muted); gap:8px; flex-direction:column; }

  footer{ font-size:12px; color:rgba(255,255,255,0.05); margin-top:6px; }

  @media (max-width:980px){
    .card{ grid-template-columns: 1fr; height:92vh; }
    .visual{ height:48vh; border-radius:14px 14px 0 0; }
    .panel{ border-left: none; border-top:1px solid rgba(255,255,255,0.03); }
  }
</style>
</head>
<body>
<div class="stage">
  <div class="card" role="application" aria-label="Interactive audio story">
    <div class="visual" id="visual">
      <div class="vignette"></div>
    </div>
    <div class="panel">
      <div>
        <h1 class="title" id="scene-title">The Storm at Marrow House</h1>
        <div class="subtitle" id="scene-sub">Scene 1 / 8</div>
      </div>
      <div class="controls" aria-hidden="false">
        <div class="nav" id="buttonNav">
          <button class="btn" id="prevBtn">◀ Prev</button>
          <button class="btn primary" id="outerBtn">Outer Voice</button>
          <button class="btn primary" id="innerBtn">Inner Voice</button>
          <button class="btn" id="nextBtn">Next ▶</button>
        </div>
        <div id="sceneText"></div>
      </div>
      <footer>
        Tip: use ← and → to navigate scenes. Audio plays with Spacebar.
      </footer>
    </div>
  </div>
</div>

<script>
const scenes = [
  {id:"opening", title:"Opening", subtitle:"October 27th, 1973 — Marrow House", image:"ending.jpeg", audio:[]},
  {id:"lila", title:"Dr. Lila Marrow — The Host", subtitle:"Soft piano behind her; calm but strained", image:"detective.png", audio:["DrLilaOuterVoice.mp3","DrLilaInnerVoice.mp3"]},
  {id:"theo", title:"Theo — The Journalist", subtitle:"Rustle of papers; match lights a candle", image:"gardener.png", audio:["JournalistOuterVoice.mp3","JournalistInnerVoice.mp3"]},
  {id:"mira", title:"Mira — The Pianist", subtitle:"Piano keys being tuned; wind leaks through window", image:"lawyer.png", audio:["PianistOuterVoice.mp3","PianistInnerVoice.mp3"]},
  {id:"elias", title:"Elias — The Lawyer", subtitle:"Chair scraping; smooth, guarded voice", image:"pianist.png", audio:["EliasTheLawyerOuterVoice.mp3","EliasTheLawyerInnerVoice.mp3"]},
  {id:"harper", title:"Harper — The Gardener", subtitle:"Outside wind; raindrops on glass", image:"journalist.png", audio:["JournalistOuterVoice.mp3","JournalistInnerVoice.mp3"]},
  {id:"noor", title:"Detective Noor — The Uninvited Guest", subtitle:"Door opens; boots on marble", image:"dr.png", audio:["NoorOuterVoice.mp3","noorInnerVoice.mp3"]},
  {id:"ending", title:"Ending — The Reveal", subtitle:"Soft rain; piano slow and somber", image:"frame.png", audio:[]}
];

const visual = document.getElementById('visual');
const sceneTitle = document.getElementById('scene-title');
const sceneSub = document.getElementById('scene-sub');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const outerBtn = document.getElementById('outerBtn');
const innerBtn = document.getElementById('innerBtn');
const buttonNav = document.getElementById('buttonNav');
const sceneText = document.getElementById('sceneText');

let current=0, audio=new Audio();

// Paragraph text for opening and ending
const sceneParagraphs = {
  opening: [
    "Welcome… to Marrow House.",
    "Perched high above the sea, the old estate stands alone. Half in shadow, half in stormlight.",
"It’s October 27th, 1973.",
"Dr. Lila Marrow has invited five guests to her family home.They’ve come for a memorial dinner.Her brother, Julian Marrow, died one year ago.They say it was an accident.",
"Lila doesn’t believe that. So she’s brought everyone who was here the night he fell.Friends. Coworkers. Strangers who know too much.",
"And one of them… knows exactly what happened.",
"Listen carefully.",
"Their voices hide what the storm reveals.",
    "Please use ← and → to navigate scenes.",
  ],
  ending: [
    "You’ve walked the halls of Marrow House. You’ve heard their confessions, their lies, their fears. Now the storm has passed… and the truth stands clear.",
"It was the one who said not to drag up the past. The one who spoke too calmly. The one who thought the storm could erase what he did.",
"He was wrong. Julian didn’t fall. He was silenced…",
"by Elias Crane, the lawyer.",
"He silenced Julian to protect a secret. But guilt doesn’t stay buried. It echoes… in every word, every sound, every storm.",
"DO YOU THINK THEY CAN FIGURE IT OUT?",
],
};

// Precreate background divs
scenes.forEach((s,i)=>{
  const d=document.createElement('div');
  d.className='bg-img';
  d.id='bg-'+i;
  d.style.backgroundImage=`url('${s.image}')`;
  visual.insertBefore(d, visual.firstChild);
});

function loadScene(index){
  if(index<0) index=0;
  if(index>=scenes.length) index=scenes.length-1;
  current=index;

  const s = scenes[current];
  sceneTitle.textContent = s.title;
  sceneSub.textContent = `${s.subtitle} — scene ${current+1} / ${scenes.length}`;

  document.querySelectorAll('.bg-img').forEach((el,i)=> el.classList.toggle('show',i===current));

  if(audio){ audio.pause(); audio.currentTime=0; }

  // Show paragraphs for opening/ending, hide buttons
  if(s.id === 'opening' || s.id === 'ending'){
    buttonNav.style.display = 'none';
    sceneText.style.display = 'flex';
    sceneText.innerHTML = sceneParagraphs[s.id].map(p=>`<p>${p}</p>`).join('');
  } else {
    buttonNav.style.display = 'flex';
    sceneText.style.display = 'none';
  }
}

// Play specific audio in the scene
function playAudio(index){
  const s = scenes[current];
  if(!s.audio || !s.audio[index]) return;

  if(audio){ audio.pause(); audio.currentTime=0; }
  audio.src = s.audio[index];
  audio.play().catch(err=>console.warn(err));
}

outerBtn.addEventListener('click', ()=> playAudio(0));
innerBtn.addEventListener('click', ()=> playAudio(1));
nextBtn.addEventListener('click', ()=> loadScene(current+1));
prevBtn.addEventListener('click', ()=> loadScene(current-1));

document.addEventListener('keydown', (e)=>{
  if(e.code==='ArrowRight'){ nextBtn.click(); e.preventDefault(); }
  if(e.code==='ArrowLeft'){ prevBtn.click(); e.preventDefault(); }
  if(e.code==='Space'){ outerBtn.click(); e.preventDefault(); }
});

// Initial load
window.addEventListener('load', ()=> loadScene(0));
</script>
</body>
</html>
